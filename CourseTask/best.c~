#include "myheader.h"

void add_a_file();
void search_for_file();
void count_files_in_directory();
void print_list();
void menu();

int main(){
	reconstruct_list();
	read_bin_file_to_list();
	while(menu()==0){printf("\t---press enter to return to menu---\n\t");fflush(stdin);getchar();}
	return 0;
}

void add_a_file(){
  char full_filename[768];
  printf("\n\tAdding new file");
  printf("\n\t enter the full path of your file: ");
  getchar();
  InputString(full_filename);
  if(file_exists(full_filename)){
  	FileInformation* obj_ptr = make_an_object_and_return_address_by_filename(full_filename);
  	append_object_to_list_by_address(obj_ptr);
  	save_current_list_to_file();
  }else{printf("\tSorry this file doesn't exists\n");}
}
void search_for_file(){}
void count_files_in_directory(){}
void print_list(){
	FileInformation* temp = head;
	while(temp->next != NULL){
		temp = (FileInformation*)(temp->next);
		printf_object_by_address(temp);
	}getchar();
}
int menu(){
  printf("-----------------------------------------------\n");
  printf("MENU OPTIONS:");
  printf("\n1.add new file\n");
  printf("2.search for file and show info\n");
  printf("3.count files in directory and show size\n");
  printf("4.print all list\n");
  printf("5.exit\n");
  char selected_option;
  printf("Enter an option please:\noption = ");
  fflush(stdin);
  scanf(" %c",&selected_option);
  printf("-----------------------------------------------\n\n");
  switch(selected_option){
    case '1':add_a_file();return 0;
    case '2':search_for_file();return 0;
    case '3':count_files_in_directory();return 0;
    case '4':print_list();return 0;
    default: return -1;
  }
}

